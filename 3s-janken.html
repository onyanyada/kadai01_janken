<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script src="js/jquery-2.1.3.min.js"></script>
    <link rel="stylesheet" href="css/sample.css">
    <title>じゃんけん</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.3.2/dist/confetti.browser.min.js"></script>

</head>

<body>

    <header>
        <h1>3秒じゃんけん</h1>
    </header>

<main>
<p>
   <input type="button" value="3秒以内でじゃんけんをする" id="btnShowBox" onclick="showBox();">
</p>
<div id="temporaryBox" style="display: none;">
   <p>3秒以内でできるだけ多く点数を稼いでください。</p>

        
        <ul>
            <li id="gu_btn" class="option">グー</li>
            <li id="cho_btn" class="option">チョキ</li>
            <li id="par_btn" class="option">パー</li>
        </ul>
        <div>コンピュータの出した手は？「<span id="pc_hands">なに？</span>」</div>
        <p id="judgment">勝ち</p>
        <p id="score"></p>
        <p class="total inner-result"></p>
</div>
<p class="total outer-result"></p>
    <div>
        <button><a href="./timer-janken.html">タイマーじゃんけんもやってみる</a></button>
    </div>
</main>

    <footer></footer>
    <script>
    //タイマー
    $('#btnShowBox').click(function(){
        $('#temporaryBox').show();
        $('.outer-result').hide();
        setTimeout(function(){
            $('#temporaryBox').fadeOut()
            $('.outer-result').show()
        },1000);
    });


   
    // 勝敗合計点数
    let total = 0; 
    let hand = "";//変数用意
    let judge = ""; //変数用意
    let score; //変数用意
    

    // グーを選んだ時
    $("#gu_btn").on("click",function(){
    const r =Math.ceil(Math.random()*3);//1.乱数(1~3)
    

    //2.if分岐処理

    if(r==1){
        hand = 'グー';
        judge = 'あいこ';
        score = 1;
        
    }
    if(r==2){
        hand = 'チョキ';
        judge = '勝ち';
        score = 2;
    confetti({
	       particleCount: 100,
	       spread: 70,
	       origin: { y: 0.6 }
	     });
    }
    if(r==3){
        hand = 'パー';
        judge = '負け';
        score = 0;
    }


    total += score;

    //3.表示処理
    $("#pc_hands").html(hand);
    $("#judgment").html(judge);
    $("#score").html(score);
    $(".total").text(total);

    });

    // チョキを選んだ時
    $("#cho_btn").on("click",function(){
    const r =Math.ceil(Math.random()*3);//1.乱数(1~3)

    //2.if分岐処理
    if(r==1){
        hand = 'グー';
        judge = '負け';
        score = 0;
    }
    if(r==2){
        hand = 'チョキ';
        judge = 'あいこ';
        score = 1;
    }
    if(r==3){
        hand = 'パー';
        judge = '勝ち';
        score = 2;

        confetti({
	       particleCount: 100,
	       spread: 70,
	       origin: { y: 0.6 }
	     });

    }

    total += score;

    //3.表示処理
    $("#pc_hands").html(hand);
    $("#judgment").html(judge);
    $("#score").html(score);
    $(".total").text(total);
    
    });
   
    // パーを選んだ時
    $("#par_btn").on("click",function(){
    const r =Math.ceil(Math.random()*3);//1.乱数(1~3)
    //2.if分岐処理
    if(r==1){
        hand = 'グー';
        judge = '勝ち';
        score = 2;

        confetti({
	       particleCount: 100,
	       spread: 70,
	       origin: { y: 0.6 }
	     });
    }
    if(r==2){
        hand = 'チョキ';
        judge = '負け';
        score = 0;
    }
    if(r==3){
        hand = 'パー';
        judge = 'あいこ';
        score = 1;
    }
    total += score;
    
    //3.表示処理
    $("#pc_hands").html(hand);
    $("#judgment").html(judge);
    $("#score").html(score);
    $(".total").text(total);
    });


   
    let result = function() {
  console.log('3秒経ちました');
}
setTimeout(result, 3000);

   
    </script>
</body>

</html>